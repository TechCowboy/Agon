Zilog eZ80 Macro Assembler Version 4.3 (19073001) RELISTED11-Dec-22     19:34:54     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -nomodsect -optsize -noreduceopt -nopadbranch
                           A     3    ; -peephole -globalopt -localcse -const=ROM 
                           A     4    	FILE	"..\main.c"
                           A     5    	.assume ADL=1
                           A     6    .DEBUG "C"
                           A     7    	SEGMENT CODE
                           A     8    .BEGREC "fmt_type",19
                           A     9    .DEFINE "status"
                           A    10    .VALUE 0
                           A    11    .CLASS 8
                           A    12    .TYPE 12
                           A    13    .ENDEF
                           A    14    .DEFINE "flags"
                           A    15    .VALUE 1
                           A    16    .CLASS 8
                           A    17    .TYPE 12
                           A    18    .ENDEF
                           A    19    .DEFINE "size"
                           A    20    .VALUE 2
                           A    21    .CLASS 8
                           A    22    .TYPE 2
                           A    23    .ENDEF
                           A    24    .DEFINE "chr"
                           A    25    .VALUE 3
                           A    26    .CLASS 8
                           A    27    .TYPE 2
                           A    28    .ENDEF
                           A    29    .DEFINE "type"
                           A    30    .VALUE 4
                           A    31    .CLASS 8
                           A    32    .TYPE 2
                           A    33    .ENDEF
                           A    34    .DEFINE "field_width"
                           A    35    .VALUE 5
                           A    36    .CLASS 8
                           A    37    .TYPE 2
                           A    38    .ENDEF
                           A    39    .DEFINE "precision"
                           A    40    .VALUE 6
                           A    41    .CLASS 8
                           A    42    .TYPE 2
                           A    43    .ENDEF
                           A    44    .DEFINE "set_begin"
                           A    45    .VALUE 7
                           A    46    .CLASS 8
                           A    47    .TYPE 34
                           A    48    .ENDEF
                           A    49    .DEFINE "set_end"
                           A    50    .VALUE 10
                           A    51    .CLASS 8
                           A    52    .TYPE 34
                           A    53    .ENDEF
                           A    54    .DEFINE "pad_whole"
                           A    55    .VALUE 13
                           A    56    .CLASS 8
                           A    57    .TYPE 12
                           A    58    .ENDEF
                           A    59    .DEFINE "pad_pre_fract"
                           A    60    .VALUE 14
                           A    61    .CLASS 8
                           A    62    .TYPE 12
                           A    63    .ENDEF
                           A    64    .DEFINE "pad_post_fract"
                           A    65    .VALUE 15
                           A    66    .CLASS 8
                           A    67    .TYPE 12
                           A    68    .ENDEF
                           A    69    .DEFINE "pad_at"
                           A    70    .VALUE 16
                           A    71    .CLASS 8
                           A    72    .TYPE 34
                           A    73    .ENDEF
                           A    74    .ENDREC "fmt_type"
                           A    75    .BEGREC "flt_info",12
                           A    76    .DEFINE "flags"
                           A    77    .VALUE 0
                           A    78    .CLASS 8
                           A    79    .TYPE 12
                           A    80    .ENDEF
                           A    81    .DEFINE "exp"
                           A    82    .VALUE 1
                           A    83    .CLASS 8
                           A    84    .TYPE 2
                           A    85    .ENDEF
                           A    86    .DEFINE "digits"
                           A    87    .VALUE 2
                           A    88    .CLASS 8
                           A    89    .DIM 10
                           A    90    .TYPE 108
                           A    91    .ENDEF
                           A    92    .ENDREC "flt_info"
                           A    93    .BEGREC "sokobanlevel",1207
                           A    94    .DEFINE "xpos"
                           A    95    .VALUE 0
                           A    96    .CLASS 8
                           A    97    .TYPE 12
                           A    98    .ENDEF
                           A    99    .DEFINE "ypos"
                           A   100    .VALUE 1
                           A   101    .CLASS 8
                           A   102    .TYPE 12
                           A   103    .ENDEF
                           A   104    .DEFINE "width"
                           A   105    .VALUE 2
                           A   106    .CLASS 8
                           A   107    .TYPE 12
                           A   108    .ENDEF
                           A   109    .DEFINE "height"
                           A   110    .VALUE 3
                           A   111    .CLASS 8
                           A   112    .TYPE 12
                           A   113    .ENDEF
                           A   114    .DEFINE "goals"
                           A   115    .VALUE 4
                           A   116    .CLASS 8
                           A   117    .TYPE 12
                           A   118    .ENDEF
                           A   119    .DEFINE "goalstaken"
                           A   120    .VALUE 5
                           A   121    .CLASS 8
                           A   122    .TYPE 12
                           A   123    .ENDEF
                           A   124    .DEFINE "crates"
                           A   125    .VALUE 6
                           A   126    .CLASS 8
                           A   127    .TYPE 12
                           A   128    .ENDEF
                           A   129    .DEFINE "data"
                           A   130    .VALUE 7
                           A   131    .CLASS 8
                           A   132    .DIM 30
                           A   133    .DIM 40
                           A   134    .TYPE 876
                           A   135    .ENDEF
                           A   136    .ENDREC "sokobanlevel"
                           A   137    .BEGREC "NONAME0",2
                           A   138    .DEFINE "ch"
                           A   139    .VALUE 0
                           A   140    .CLASS 8
                           A   141    .TYPE 2
                           A   142    .ENDEF
                           A   143    .DEFINE "tile_id"
                           A   144    .VALUE 1
                           A   145    .CLASS 8
                           A   146    .TYPE 12
                           A   147    .ENDEF
                           A   148    .ENDREC "NONAME0"
                           A   149    ;    1	#include <stdio.h>
                           A   150    ;    2	#include <ctype.h>
                           A   151    ;    3	#include "mos-interface.h"
                           A   152    ;    4	#include "vdp.h"
                           A   153    ;    5	#include "game.h"
                           A   154    ;    6	
                           A   155    ;    7	#define FILE_LEVELS	"levels.bin"
                           A   156    ;    8	
                           A   157    ;    9	int main(int argc, char * argv[]) {
0400D7                     A   158    _main:
                           A   159    .DEFINE "_main"
                           A   160    
                           A   161    .VALUE _main
                           A   162    
                           A   163    .CLASS 2
                           A   164    
                           A   165    .TYPE 68
                           A   166    
                           A   167    .ENDEF
                           A   168    
                           A   169    .BEGFUNC "main",9,"_main"
                           A   170    
                           A   171    .LINE 9
                           A   172    
                           A   173    .DEFINE "argc"
                           A   174    
                           A   175    .CLASS 65
                           A   176    
                           A   177    .VALUE 6
                           A   178    
                           A   179    .TYPE 4
                           A   180    
                           A   181    .ENDEF
                           A   182    
                           A   183    .DEFINE "argv"
                           A   184    
                           A   185    .CLASS 65
                           A   186    
                           A   187    .VALUE 9
                           A   188    
                           A   189    .TYPE 290
                           A   190    
                           A   191    .ENDEF
                           A   192    
                           A   193    .DEFINE "ingame"
                           A   194    
                           A   195    .CLASS 65
                           A   196    
                           A   197    .VALUE -1
                           A   198    
                           A   199    .TYPE 12
                           A   200    
                           A   201    .ENDEF
                           A   202    
                           A   203    .DEFINE "levelnumber"
                           A   204    
                           A   205    .CLASS 65
                           A   206    
                           A   207    .VALUE -3
                           A   208    
                           A   209    .TYPE 3
                           A   210    
                           A   211    .ENDEF
                           A   212    
                           A   213    .DEFINE "doneplaying"
                           A   214    
                           A   215    .CLASS 65
                           A   216    
                           A   217    .VALUE -4
                           A   218    
                           A   219    .TYPE 12
                           A   220    
                           A   221    .ENDEF
                           A   222    
                           A   223    .DEFINE "levels"
                           A   224    
                           A   225    .CLASS 65
                           A   226    
                           A   227    .VALUE -5
                           A   228    
                           A   229    .TYPE 12
                           A   230    
                           A   231    .ENDEF
                           A   232    
                           A   233    .DEFINE "key"
                           A   234    
                           A   235    .CLASS 65
                           A   236    
                           A   237    .VALUE -6
                           A   238    
                           A   239    .TYPE 2
                           A   240    
                           A   241    .ENDEF
                           A   242    
0400D7 DDE5                A   243    	PUSH	IX
0400D9 DD210000 00         A   244    	LD	IX,0
0400DE DD39                A   245    	ADD	IX,SP
0400E0 C5                  A   246    	PUSH	BC
0400E1 C5                  A   247    	PUSH	BC
0400E2 C5                  A   248    	PUSH	BC
                           A   249    ;   10		UINT8 levels;
                           A   250    ;   11		INT16 levelnumber = -1;
                           A   251    .LINE 11
                           A   252    
0400E3 DD36FDFF            A   253    	LD	(IX+%FFFFFFFD),%FF
0400E7 DD36FEFF            A   254    	LD	(IX+%FFFFFFFE),%FF
                           A   255    ;   12		BOOL doneplaying = FALSE;
                           A   256    .LINE 12
                           A   257    
0400EB DD36FC00            A   258    	LD	(IX+%FFFFFFFC),%0
                           A   259    ;   13		BOOL quit;
                           A   260    ;   14		BOOL ingame;
                           A   261    ;   15		char key;
                           A   262    ;   16		
                           A   263    ;   17		game_splash_screen();
                           A   264    .LINE 17
                           A   265    
0400EF CD FB 1C 04         A   266    	CALL	_game_splash_screen
                           A   267    ;   18		
                           A   268    ;   19		levels = game_readLevels(FILE_LEVEL
                           A   269    .LINE 19
                           A   270    
0400F3 01 3A 4C 04         A   271    	LD	BC,L__0
0400F7 C5                  A   272    	PUSH	BC
0400F8 CD 64 26 04         A   273    	CALL	_game_readLevels
0400FC C1                  A   274    	POP	BC
0400FD DD77FB              A   275    	LD	(IX+%FFFFFFFB),A
                           A   276    ;   20		
                           A   277    ;   21		if(levels)
                           A   278    .LINE 21
                           A   279    
040100 B7                  A   280    	OR	A,A
040101 CA 57 02 04         A   281    	JR	Z,L_22
                           A   282    ;   22		{			
                           A   283    ;   23			game_sendSpriteData();
                           A   284    .LINE 23
                           A   285    
040105 CD EF 0E 04         A   286    	CALL	_game_sendSpriteData
                           A   287    ;   24			
                           A   288    ;   25			while(!doneplaying)
                           A   289    .LINE 25
                           A   290    
040109 C3 3F 02 04         A   291    	JR	L_18
04010D                     A   292    L_19:
                           A   293    ;   26			{
                           A   294    ;   27				levelnumber = game_selectLe
                           A   295    .LINE 27
                           A   296    
04010D DD07FD              A   297    	LD	BC,(IX+%FFFFFFFD)
040110 C5                  A   298    	PUSH	BC
040111 DD4EFB              A   299    	LD	C,(IX+%FFFFFFFB)
040114 0600                A   300    	LD	B,%0
040116 C5                  A   301    	PUSH	BC
040117 CD D4 20 04         A   302    	CALL	_game_selectLevel
04011B C1                  A   303    	POP	BC
04011C C1                  A   304    	POP	BC
04011D DD75FD              A   305    	LD	(IX+%FFFFFFFD),L
040120 DD74FE              A   306    	LD	(IX+%FFFFFFFE),H
                           A   307    ;   28				if(levelnumber >= 0)
                           A   308    .LINE 28
                           A   309    
040123 DD27FD              A   310    	LD	HL,(IX+%FFFFFFFD)
040126 CD A1 32 04         A   311    	CALL	__scmpzero
04012A FA 3B 02 04         A   312    	JP	M,L_17
                           A   313    ;   29				{
                           A   314    ;   30	
                           A   315    ;   31					// Start game
                           A   316    ;   32					ingame = TRUE;
                           A   317    .LINE 32
                           A   318    
04012E DD36FF01            A   319    	LD	(IX+%FFFFFFFF),%1
                           A   320    ;   33					vdp_mode(0);	// 640x
                           A   321    .LINE 33
                           A   322    
040132 01000000            A   323    	LD	BC,0
040136 C5                  A   324    	PUSH	BC
040137 CD 59 03 04         A   325    	CALL	_vdp_mode
04013B C1                  A   326    	POP	BC
                           A   327    ;   34					vdp_cursorDisable();
                           A   328    .LINE 34
                           A   329    
04013C CD 16 0D 04         A   330    	CALL	_vdp_cursorDisable
                           A   331    ;   35	
                           A   332    ;   36					game_initLevel(levelnum
                           A   333    .LINE 36
                           A   334    
040140 DD4EFD              A   335    	LD	C,(IX+%FFFFFFFD)
040143 0600                A   336    	LD	B,%0
040145 C5                  A   337    	PUSH	BC
040146 CD 56 27 04         A   338    	CALL	_game_initLevel
04014A C1                  A   339    	POP	BC
                           A   340    ;   37					game_initSprites();		
                           A   341    .LINE 37
                           A   342    
04014B CD 91 27 04         A   343    	CALL	_game_initSprites
                           A   344    ;   38					game_displayLevel();
                           A   345    .LINE 38
                           A   346    
04014F CD D6 22 04         A   347    	CALL	_game_displayLevel
                           A   348    ;   39					while(ingame)
                           A   349    .LINE 39
                           A   350    
040153 C3 31 02 04         A   351    	JR	L_14
040157                     A   352    L_15:
                           A   353    ;   40					{
                           A   354    ;   41						key = getch();
                           A   355    .LINE 41
                           A   356    
040157 CD D3 28 04         A   357    	CALL	_getch
04015B DD77FA              A   358    	LD	(IX+%FFFFFFFA),A
                           A   359    ;   42						switch(key)
                           A   360    .LINE 42
                           A   361    
04015E 17ED62              A   362    	SEXT	HL
040161 DD6EFA              A   363    	LD	L,(IX+%FFFFFFFA)
040164 CD 48 32 04         A   364    	CALL	__case8D
040168 E9                  A   365    	JP	(HL)
040169                     A   366    L__3:
040169 0500                A   367    	DW	5
04016B 1B                  A   368    	DB	27
04016C 820104              A   369    	DW24	L_2	
                           A   370    
04016F 51                  A   371    	DB	81
040170 820104              A   372    	DW24	L_1	
                           A   373    
040173 68                  A   374    	DB	104
040174 C40104              A   375    	DW24	L_5	
                           A   376    
040177 71                  A   377    	DB	113
040178 820104              A   378    	DW24	L_0	
                           A   379    
04017B 75                  A   380    	DB	117
04017C EC0104              A   381    	DW24	L_6	
                           A   382    
04017F F00104              A   383    	DW24	L_7	
                           A   384    
                           A   385    ;   43						{
                           A   386    ;   44							case 'q':
040182                     A   387    L_0:
                           A   388    .LINE 44
                           A   389    
                           A   390    ;   45							case 'Q':
040182                     A   391    L_1:
                           A   392    .LINE 45
                           A   393    
                           A   394    ;   46							case 27:
040182                     A   395    L_2:
                           A   396    .LINE 46
                           A   397    
                           A   398    ;   47								game_resetS
                           A   399    .LINE 47
                           A   400    
040182 CD 73 10 04         A   401    	CALL	_game_resetSprites
                           A   402    ;   48								ingame = (g
                           A   403    .LINE 48
                           A   404    
040186 016E0000            A   405    	LD	BC,110
04018A C5                  A   406    	PUSH	BC
04018B 01790000            A   407    	LD	BC,121
04018F C5                  A   408    	PUSH	BC
040190 01 45 4C 04         A   409    	LD	BC,L__4
040194 C5                  A   410    	PUSH	BC
040195 CD 04 1C 04         A   411    	CALL	_game_getResponse
040199 C1                  A   412    	POP	BC
04019A C1                  A   413    	POP	BC
04019B C1                  A   414    	POP	BC
04019C 47                  A   415    	LD	B,A
04019D 78                  A   416    	LD	A,B
04019E 17ED62              A   417    	SEXT	HL
0401A1 68                  A   418    	LD	L,B
0401A2 01790000            A   419    	LD	BC,121
0401A6 B7                  A   420    	OR	A,A
0401A7 ED42                A   421    	SBC	HL,BC
0401A9 28 04               A   422    	JR	Z,L__6
0401AB 3E01                A   423    	LD	A,%1
0401AD 18 01               A   424    	JR	L__7
0401AF                     A   425    L__6:
0401AF AF                  A   426    	XOR	A,A
0401B0                     A   427    L__7:
0401B0 DD77FF              A   428    	LD	(IX+%FFFFFFFF),A
                           A   429    ;   49								if(ingame)
                           A   430    .LINE 49
                           A   431    
0401B3 B7                  A   432    	OR	A,A
0401B4 28 08               A   433    	JR	Z,L_4
                           A   434    ;   50								{
                           A   435    ;   51									game_in
                           A   436    .LINE 51
                           A   437    
0401B6 CD 91 27 04         A   438    	CALL	_game_initSprites
                           A   439    ;   52									game_di
                           A   440    .LINE 52
                           A   441    
0401BA CD D6 22 04         A   442    	CALL	_game_displayLevel
                           A   443    ;   53								}
0401BE                     A   444    L_4:
                           A   445    .LINE 53
                           A   446    
                           A   447    ;   54								game_displa
                           A   448    .LINE 54
                           A   449    
0401BE CD D6 22 04         A   450    	CALL	_game_displayLevel
                           A   451    ;   55								break;
                           A   452    .LINE 55
                           A   453    
0401C2 18 6D               A   454    	JR	L_14
                           A   455    ;   56							case 'h':
0401C4                     A   456    L_5:
                           A   457    .LINE 56
                           A   458    
                           A   459    ;   57								game_resetS
                           A   460    .LINE 57
                           A   461    
0401C4 CD 73 10 04         A   462    	CALL	_game_resetSprites
                           A   463    ;   58								vdp_cls();
                           A   464    .LINE 58
                           A   465    
0401C8 CD 7E 03 04         A   466    	CALL	_vdp_cls
                           A   467    ;   59								game_displa
                           A   468    .LINE 59
                           A   469    
0401CC 010D0000            A   470    	LD	BC,13
0401D0 C5                  A   471    	PUSH	BC
0401D1 011E0000            A   472    	LD	BC,30
0401D5 C5                  A   473    	PUSH	BC
0401D6 CD 1F 1E 04         A   474    	CALL	_game_displayHelp
0401DA C1                  A   475    	POP	BC
0401DB C1                  A   476    	POP	BC
                           A   477    ;   60								getch();
                           A   478    .LINE 60
                           A   479    
0401DC CD D3 28 04         A   480    	CALL	_getch
                           A   481    ;   61								vdp_cls();
                           A   482    .LINE 61
                           A   483    
0401E0 CD 7E 03 04         A   484    	CALL	_vdp_cls
                           A   485    ;   62								game_initSp
                           A   486    .LINE 62
                           A   487    
0401E4 CD 91 27 04         A   488    	CALL	_game_initSprites
                           A   489    ;   63								game_displa
                           A   490    .LINE 63
                           A   491    
0401E8 CD D6 22 04         A   492    	CALL	_game_displayLevel
                           A   493    ;   64							case 'u':
0401EC                     A   494    L_6:
                           A   495    .LINE 64
                           A   496    
                           A   497    ;   65								game_handle
                           A   498    .LINE 65
                           A   499    
0401EC CD 68 18 04         A   500    	CALL	_game_handleUndoMove
                           A   501    ;   66							default:
0401F0                     A   502    L_7:
                           A   503    .LINE 66
                           A   504    
                           A   505    ;   67								ingame = !g
                           A   506    .LINE 67
                           A   507    
0401F0 DD4EFA              A   508    	LD	C,(IX+%FFFFFFFA)
0401F3 0600                A   509    	LD	B,%0
0401F5 C5                  A   510    	PUSH	BC
0401F6 CD BE 19 04         A   511    	CALL	_game_handleKey
0401FA C1                  A   512    	POP	BC
0401FB B7                  A   513    	OR	A,A
0401FC 20 09               A   514    	JR	NZ,L_9
0401FE 01010000            A   515    	LD	BC,1
040202 DD0FF7              A   516    	LD	(IX+%FFFFFFF7),BC
040205 18 07               A   517    	JR	L_10
040207                     A   518    L_9:
040207 01000000            A   519    	LD	BC,0
04020B DD0FF7              A   520    	LD	(IX+%FFFFFFF7),BC
04020E                     A   521    L_10:
04020E DD7EF7              A   522    	LD	A,(IX+%FFFFFFF7)
040211 DD77FF              A   523    	LD	(IX+%FFFFFFFF),A
                           A   524    ;   68								if(!ingame)
                           A   525    .LINE 68
                           A   526    
040214 B7                  A   527    	OR	A,A
040215 20 1A               A   528    	JR	NZ,L_14
                           A   529    ;   69								{
                           A   530    ;   70									game_re
                           A   531    .LINE 70
                           A   532    
040217 CD 73 10 04         A   533    	CALL	_game_resetSprites
                           A   534    ;   71									game_ge
                           A   535    .LINE 71
                           A   536    
04021B 011B0000            A   537    	LD	BC,27
04021F C5                  A   538    	PUSH	BC
040220 010D0000            A   539    	LD	BC,13
040224 C5                  A   540    	PUSH	BC
040225 01 5E 4C 04         A   541    	LD	BC,L__11
040229 C5                  A   542    	PUSH	BC
04022A CD 04 1C 04         A   543    	CALL	_game_getResponse
04022E C1                  A   544    	POP	BC
04022F C1                  A   545    	POP	BC
040230 C1                  A   546    	POP	BC
                           A   547    ;   72								}
                           A   548    ;   73							break;
                           A   549    ;   74						}					
                           A   550    ;   75					}
040231                     A   551    L_14:
                           A   552    .LINE 75
                           A   553    
040231 DD7EFF              A   554    	LD	A,(IX+%FFFFFFFF)
040234 B7                  A   555    	OR	A,A
040235 C2 57 01 04         A   556    	JR	NZ,L_15
040239 18 04               A   557    	JR	L_18
                           A   558    ;   76				}
                           A   559    ;   77				else doneplaying = TRUE;
04023B                     A   560    L_17:
                           A   561    .LINE 77
                           A   562    
04023B DD36FC01            A   563    	LD	(IX+%FFFFFFFC),%1
                           A   564    ;   78			}
04023F                     A   565    L_18:
                           A   566    .LINE 78
                           A   567    
04023F DD7EFC              A   568    	LD	A,(IX+%FFFFFFFC)
040242 B7                  A   569    	OR	A,A
040243 CA 0D 01 04         A   570    	JR	Z,L_19
                           A   571    ;   79	
                           A   572    ;   80			game_resetSprites();
                           A   573    .LINE 80
                           A   574    
040247 CD 73 10 04         A   575    	CALL	_game_resetSprites
                           A   576    ;   81			vdp_mode(1);	// 512x384 pixe
                           A   577    .LINE 81
                           A   578    
04024B 01010000            A   579    	LD	BC,1
04024F C5                  A   580    	PUSH	BC
040250 CD 59 03 04         A   581    	CALL	_vdp_mode
040254 C1                  A   582    	POP	BC
                           A   583    ;   82		}
                           A   584    ;   83		else
                           A   585    .LINE 83
                           A   586    
040255 18 42               A   587    	JR	L_23
040257                     A   588    L_22:
                           A   589    ;   84		{
                           A   590    ;   85			vdp_cursorGoto(15,38);
                           A   591    .LINE 85
                           A   592    
040257 01260000            A   593    	LD	BC,38
04025B C5                  A   594    	PUSH	BC
04025C 010F0000            A   595    	LD	BC,15
040260 C5                  A   596    	PUSH	BC
040261 CD C6 03 04         A   597    	CALL	_vdp_cursorGoto
040265 C1                  A   598    	POP	BC
040266 C1                  A   599    	POP	BC
                           A   600    ;   86			vdp_fgcolour(255,0,0);
                           A   601    .LINE 86
                           A   602    
040267 01000000            A   603    	LD	BC,0
04026B C5                  A   604    	PUSH	BC
04026C C5                  A   605    	PUSH	BC
04026D 01FF0000            A   606    	LD	BC,255
040271 C5                  A   607    	PUSH	BC
040272 CD 57 04 04         A   608    	CALL	_vdp_fgcolour
040276 C1                  A   609    	POP	BC
040277 C1                  A   610    	POP	BC
040278 C1                  A   611    	POP	BC
                           A   612    ;   87			puts("No level available! - pre
                           A   613    .LINE 87
                           A   614    
040279 01 6E 4C 04         A   615    	LD	BC,L__14
04027D C5                  A   616    	PUSH	BC
04027E CD CF 30 04         A   617    	CALL	_puts
040282 C1                  A   618    	POP	BC
                           A   619    ;   88			getch();
                           A   620    .LINE 88
                           A   621    
040283 CD D3 28 04         A   622    	CALL	_getch
                           A   623    ;   89			vdp_cls();
                           A   624    .LINE 89
                           A   625    
040287 CD 7E 03 04         A   626    	CALL	_vdp_cls
                           A   627    ;   90			vdp_fgcolour(255,255,255);
                           A   628    .LINE 90
                           A   629    
04028B 01FF0000            A   630    	LD	BC,255
04028F C5                  A   631    	PUSH	BC
040290 C5                  A   632    	PUSH	BC
040291 C5                  A   633    	PUSH	BC
040292 CD 57 04 04         A   634    	CALL	_vdp_fgcolour
040296 C1                  A   635    	POP	BC
040297 C1                  A   636    	POP	BC
040298 C1                  A   637    	POP	BC
                           A   638    ;   91		}
040299                     A   639    L_23:
                           A   640    .LINE 91
                           A   641    
                           A   642    ;   92		puts("Thank you for playing Sokoban
                           A   643    .LINE 92
                           A   644    
040299 01 92 4C 04         A   645    	LD	BC,L__15
04029D C5                  A   646    	PUSH	BC
04029E CD CF 30 04         A   647    	CALL	_puts
0402A2 C1                  A   648    	POP	BC
                           A   649    ;   93		return 0;
                           A   650    .LINE 93
                           A   651    
0402A3 B7                  A   652    	OR	A,A
0402A4 ED62                A   653    	SBC	HL,HL
                           A   654    ;   94	}
                           A   655    .LINE 94
                           A   656    
0402A6 DDF9                A   657    	LD	SP,IX
0402A8 DDE1                A   658    	POP	IX
0402AA C9                  A   659    	RET	
                           A   660    
                           A   661    
                           A   662    ;**************************** _main ***********
                           A   663    ;Name                         Addr/Register   S
                           A   664    ;_puts                               IMPORT  --
                           A   665    ;_vdp_fgcolour                       IMPORT  --
                           A   666    ;_vdp_cursorGoto                     IMPORT  --
                           A   667    ;_game_handleKey                     IMPORT  --
                           A   668    ;_game_handleUndoMove                IMPORT  --
                           A   669    ;_game_displayHelp                   IMPORT  --
                           A   670    ;_vdp_cls                            IMPORT  --
                           A   671    ;_game_getResponse                   IMPORT  --
                           A   672    ;_game_resetSprites                  IMPORT  --
                           A   673    ;_getch                              IMPORT  --
                           A   674    ;_game_displayLevel                  IMPORT  --
                           A   675    ;_game_initSprites                   IMPORT  --
                           A   676    ;_game_initLevel                     IMPORT  --
                           A   677    ;_vdp_cursorDisable                  IMPORT  --
                           A   678    ;_vdp_mode                           IMPORT  --
                           A   679    ;_game_selectLevel                   IMPORT  --
                           A   680    ;_game_sendSpriteData                IMPORT  --
                           A   681    ;_game_readLevels                    IMPORT  --
                           A   682    ;_game_splash_screen                 IMPORT  --
                           A   683    ;temp11                                IX-9    
                           A   684    ;key                                   IX-6    
                           A   685    ;levels                                IX-5    
                           A   686    ;doneplaying                           IX-4    
                           A   687    ;levelnumber                           IX-3    
                           A   688    ;ingame                                IX-1    
                           A   689    ;argv                                  IX+9    
                           A   690    ;argc                                  IX+6    
                           A   691    
                           A   692    
                           A   693    ; Stack Frame Size: 21 (bytes)
                           A   694    ;       Spill Code: 0 (instruction)
                           A   695    
                           A   696    
                           A   697    .ENDFUNC "main",94,"_main"
                           A   698    	SEGMENT STRSECT
044C3A                     A   699    L__0:
044C3A 6C657665 6C732E62   A   700    	DB	"levels.bin"
044C42 696E 
044C44 00                  A   701    	DB	0
044C45                     A   702    L__4:
044C45 5265616C 6C792051   A   703    	DB	"Really QUIT level (y/n)?"
044C4D 55495420 6C657665 
044C55 6C202879 2F6E293F 
044C5D 00                  A   704    	DB	0
044C5E                     A   705    L__11:
044C5E 4C657665 6C20636F   A   706    	DB	"Level complete!"
044C66 6D706C65 746521 
044C6D 00                  A   707    	DB	0
044C6E                     A   708    L__14:
044C6E 4E6F206C 6576656C   A   709    	DB	"No level available! - press any key"
044C76 20617661 696C6162 
044C7E 6C652120 2D207072 
044C86 65737320 616E7920 
044C8E 6B6579 
044C91 00                  A   710    	DB	0
044C92                     A   711    L__15:
044C92 5468616E 6B20796F   A   712    	DB	"Thank you for playing Sokoban"
044C9A 7520666F 7220706C 
044CA2 6179696E 6720536F 
044CAA 6B6F6261 6E 
044CAF 0D0A00              A   713    	DB	13,10,0
                           A   714    	XREF _game_splash_screen:ROM
                           A   715    	XREF _game_handleUndoMove:ROM
                           A   716    	XREF _game_displayHelp:ROM
                           A   717    	XREF _game_getResponse:ROM
                           A   718    	XREF _game_selectLevel:ROM
                           A   719    	XREF _game_handleKey:ROM
                           A   720    	XREF _game_displayLevel:ROM
                           A   721    	XREF _game_resetSprites:ROM
                           A   722    	XREF _game_initSprites:ROM
                           A   723    	XREF _game_initLevel:ROM
                           A   724    	XREF _game_sendSpriteData:ROM
                           A   725    	XREF _game_readLevels:ROM
                           A   726    	XREF _vdp_fgcolour:ROM
                           A   727    	XREF _vdp_cursorDisable:ROM
                           A   728    	XREF _vdp_cursorGoto:ROM
                           A   729    	XREF _vdp_cls:ROM
                           A   730    	XREF _vdp_mode:ROM
                           A   731    	XREF _getch:ROM
                           A   732    	XREF _puts:ROM
                           A   733    	XREF __scmpzero:ROM
                           A   734    	XREF __case8D:ROM
                           A   735    	XDEF _main
                           A   736    	END


Errors: 0
Warnings: 0
Lines Assembled: 737
