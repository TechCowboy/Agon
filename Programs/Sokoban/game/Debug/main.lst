Zilog eZ80 Macro Assembler Version 4.3 (19073001) RELISTED20-Dec-22     19:42:12     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -nomodsect -optsize -noreduceopt -nopadbranch
                           A     3    ; -peephole -globalopt -localcse -const=ROM 
                           A     4    	FILE	"..\main.c"
                           A     5    	.assume ADL=1
                           A     6    .DEBUG "C"
                           A     7    	SEGMENT CODE
                           A     8    .BEGREC "fmt_type",19
                           A     9    .DEFINE "status"
                           A    10    .VALUE 0
                           A    11    .CLASS 8
                           A    12    .TYPE 12
                           A    13    .ENDEF
                           A    14    .DEFINE "flags"
                           A    15    .VALUE 1
                           A    16    .CLASS 8
                           A    17    .TYPE 12
                           A    18    .ENDEF
                           A    19    .DEFINE "size"
                           A    20    .VALUE 2
                           A    21    .CLASS 8
                           A    22    .TYPE 2
                           A    23    .ENDEF
                           A    24    .DEFINE "chr"
                           A    25    .VALUE 3
                           A    26    .CLASS 8
                           A    27    .TYPE 2
                           A    28    .ENDEF
                           A    29    .DEFINE "type"
                           A    30    .VALUE 4
                           A    31    .CLASS 8
                           A    32    .TYPE 2
                           A    33    .ENDEF
                           A    34    .DEFINE "field_width"
                           A    35    .VALUE 5
                           A    36    .CLASS 8
                           A    37    .TYPE 2
                           A    38    .ENDEF
                           A    39    .DEFINE "precision"
                           A    40    .VALUE 6
                           A    41    .CLASS 8
                           A    42    .TYPE 2
                           A    43    .ENDEF
                           A    44    .DEFINE "set_begin"
                           A    45    .VALUE 7
                           A    46    .CLASS 8
                           A    47    .TYPE 34
                           A    48    .ENDEF
                           A    49    .DEFINE "set_end"
                           A    50    .VALUE 10
                           A    51    .CLASS 8
                           A    52    .TYPE 34
                           A    53    .ENDEF
                           A    54    .DEFINE "pad_whole"
                           A    55    .VALUE 13
                           A    56    .CLASS 8
                           A    57    .TYPE 12
                           A    58    .ENDEF
                           A    59    .DEFINE "pad_pre_fract"
                           A    60    .VALUE 14
                           A    61    .CLASS 8
                           A    62    .TYPE 12
                           A    63    .ENDEF
                           A    64    .DEFINE "pad_post_fract"
                           A    65    .VALUE 15
                           A    66    .CLASS 8
                           A    67    .TYPE 12
                           A    68    .ENDEF
                           A    69    .DEFINE "pad_at"
                           A    70    .VALUE 16
                           A    71    .CLASS 8
                           A    72    .TYPE 34
                           A    73    .ENDEF
                           A    74    .ENDREC "fmt_type"
                           A    75    .BEGREC "flt_info",12
                           A    76    .DEFINE "flags"
                           A    77    .VALUE 0
                           A    78    .CLASS 8
                           A    79    .TYPE 12
                           A    80    .ENDEF
                           A    81    .DEFINE "exp"
                           A    82    .VALUE 1
                           A    83    .CLASS 8
                           A    84    .TYPE 2
                           A    85    .ENDEF
                           A    86    .DEFINE "digits"
                           A    87    .VALUE 2
                           A    88    .CLASS 8
                           A    89    .DIM 10
                           A    90    .TYPE 108
                           A    91    .ENDEF
                           A    92    .ENDREC "flt_info"
                           A    93    .BEGREC "sokobanlevel",1207
                           A    94    .DEFINE "xpos"
                           A    95    .VALUE 0
                           A    96    .CLASS 8
                           A    97    .TYPE 12
                           A    98    .ENDEF
                           A    99    .DEFINE "ypos"
                           A   100    .VALUE 1
                           A   101    .CLASS 8
                           A   102    .TYPE 12
                           A   103    .ENDEF
                           A   104    .DEFINE "width"
                           A   105    .VALUE 2
                           A   106    .CLASS 8
                           A   107    .TYPE 12
                           A   108    .ENDEF
                           A   109    .DEFINE "height"
                           A   110    .VALUE 3
                           A   111    .CLASS 8
                           A   112    .TYPE 12
                           A   113    .ENDEF
                           A   114    .DEFINE "goals"
                           A   115    .VALUE 4
                           A   116    .CLASS 8
                           A   117    .TYPE 12
                           A   118    .ENDEF
                           A   119    .DEFINE "goalstaken"
                           A   120    .VALUE 5
                           A   121    .CLASS 8
                           A   122    .TYPE 12
                           A   123    .ENDEF
                           A   124    .DEFINE "crates"
                           A   125    .VALUE 6
                           A   126    .CLASS 8
                           A   127    .TYPE 12
                           A   128    .ENDEF
                           A   129    .DEFINE "data"
                           A   130    .VALUE 7
                           A   131    .CLASS 8
                           A   132    .DIM 30
                           A   133    .DIM 40
                           A   134    .TYPE 876
                           A   135    .ENDEF
                           A   136    .ENDREC "sokobanlevel"
                           A   137    .BEGREC "NONAME0",2
                           A   138    .DEFINE "ch"
                           A   139    .VALUE 0
                           A   140    .CLASS 8
                           A   141    .TYPE 2
                           A   142    .ENDEF
                           A   143    .DEFINE "tile_id"
                           A   144    .VALUE 1
                           A   145    .CLASS 8
                           A   146    .TYPE 12
                           A   147    .ENDEF
                           A   148    .ENDREC "NONAME0"
                           A   149    ;    1	#include <stdio.h>
                           A   150    ;    2	#include <ctype.h>
                           A   151    ;    3	#include "mos-interface.h"
                           A   152    ;    4	#include "vdp.h"
                           A   153    ;    5	#include "game.h"
                           A   154    ;    6	
                           A   155    ;    7	#define FILE_LEVELS	"levels.bin"
                           A   156    ;    8	
                           A   157    ;    9	int main(int argc, char * argv[]) {
0400D7                     A   158    _main:
                           A   159    .DEFINE "_main"
                           A   160    
                           A   161    .VALUE _main
                           A   162    
                           A   163    .CLASS 2
                           A   164    
                           A   165    .TYPE 68
                           A   166    
                           A   167    .ENDEF
                           A   168    
                           A   169    .BEGFUNC "main",9,"_main"
                           A   170    
                           A   171    .LINE 9
                           A   172    
                           A   173    .DEFINE "argc"
                           A   174    
                           A   175    .CLASS 65
                           A   176    
                           A   177    .VALUE 6
                           A   178    
                           A   179    .TYPE 4
                           A   180    
                           A   181    .ENDEF
                           A   182    
                           A   183    .DEFINE "argv"
                           A   184    
                           A   185    .CLASS 65
                           A   186    
                           A   187    .VALUE 9
                           A   188    
                           A   189    .TYPE 290
                           A   190    
                           A   191    .ENDEF
                           A   192    
                           A   193    .DEFINE "levelnumber"
                           A   194    
                           A   195    .CLASS 65
                           A   196    
                           A   197    .VALUE -2
                           A   198    
                           A   199    .TYPE 3
                           A   200    
                           A   201    .ENDEF
                           A   202    
                           A   203    .DEFINE "ingame"
                           A   204    
                           A   205    .CLASS 65
                           A   206    
                           A   207    .VALUE -3
                           A   208    
                           A   209    .TYPE 12
                           A   210    
                           A   211    .ENDEF
                           A   212    
                           A   213    .DEFINE "levels"
                           A   214    
                           A   215    .CLASS 65
                           A   216    
                           A   217    .VALUE -4
                           A   218    
                           A   219    .TYPE 12
                           A   220    
                           A   221    .ENDEF
                           A   222    
                           A   223    .DEFINE "key"
                           A   224    
                           A   225    .CLASS 65
                           A   226    
                           A   227    .VALUE -5
                           A   228    
                           A   229    .TYPE 2
                           A   230    
                           A   231    .ENDEF
                           A   232    
0400D7 DDE5                A   233    	PUSH	IX
0400D9 DD210000 00         A   234    	LD	IX,0
0400DE DD39                A   235    	ADD	IX,SP
0400E0 C5                  A   236    	PUSH	BC
0400E1 C5                  A   237    	PUSH	BC
0400E2 3B                  A   238    	DEC	SP
0400E3 3B                  A   239    	DEC	SP
                           A   240    ;   10		UINT8 levels;
                           A   241    ;   11		INT16 levelnumber = 0;
                           A   242    .LINE 11
                           A   243    
0400E4 DD36FE00            A   244    	LD	(IX+%FFFFFFFE),%0
0400E8 DD36FF00            A   245    	LD	(IX+%FFFFFFFF),%0
                           A   246    ;   12		BOOL doneplaying = FALSE;
                           A   247    ;   13		BOOL quit;
                           A   248    ;   14		BOOL ingame;
                           A   249    ;   15		char key;
                           A   250    ;   16		
                           A   251    ;   17		game_splash_screen();
                           A   252    .LINE 17
                           A   253    
0400EC CD 24 1D 04         A   254    	CALL	_game_splash_screen
                           A   255    ;   18		
                           A   256    ;   19		levels = game_readLevels(FILE_LEVEL
                           A   257    .LINE 19
                           A   258    
0400F0 01 41 4C 04         A   259    	LD	BC,L__0
0400F4 C5                  A   260    	PUSH	BC
0400F5 CD 6B 26 04         A   261    	CALL	_game_readLevels
0400F9 C1                  A   262    	POP	BC
0400FA DD77FC              A   263    	LD	(IX+%FFFFFFFC),A
                           A   264    ;   20		
                           A   265    ;   21		if(levels)
                           A   266    .LINE 21
                           A   267    
0400FD B7                  A   268    	OR	A,A
0400FE CA 80 02 04         A   269    	JR	Z,L_24
                           A   270    ;   22		{			
                           A   271    ;   23			game_sendSpriteData();
                           A   272    .LINE 23
                           A   273    
040102 CD 18 0F 04         A   274    	CALL	_game_sendSpriteData
                           A   275    ;   24			
                           A   276    ;   25			while(levelnumber >= 0)
                           A   277    .LINE 25
                           A   278    
040106 C3 65 02 04         A   279    	JR	L_20
04010A                     A   280    L_21:
                           A   281    ;   26			{
                           A   282    ;   27				levelnumber = game_selectLe
                           A   283    .LINE 27
                           A   284    
04010A DD07FE              A   285    	LD	BC,(IX+%FFFFFFFE)
04010D C5                  A   286    	PUSH	BC
04010E DD4EFC              A   287    	LD	C,(IX+%FFFFFFFC)
040111 0600                A   288    	LD	B,%0
040113 C5                  A   289    	PUSH	BC
040114 CD FD 20 04         A   290    	CALL	_game_selectLevel
040118 C1                  A   291    	POP	BC
040119 C1                  A   292    	POP	BC
04011A DD75FE              A   293    	LD	(IX+%FFFFFFFE),L
04011D DD74FF              A   294    	LD	(IX+%FFFFFFFF),H
                           A   295    ;   28				if(levelnumber >= 0)
                           A   296    .LINE 28
                           A   297    
040120 DD27FE              A   298    	LD	HL,(IX+%FFFFFFFE)
040123 CD A8 32 04         A   299    	CALL	__scmpzero
040127 FA 65 02 04         A   300    	JP	M,L_20
                           A   301    ;   29				{
                           A   302    ;   30					// Start game
                           A   303    ;   31					ingame = TRUE;
                           A   304    .LINE 31
                           A   305    
04012B DD36FD01            A   306    	LD	(IX+%FFFFFFFD),%1
                           A   307    ;   32					vdp_mode(0);	// 640x
                           A   308    .LINE 32
                           A   309    
04012F 01000000            A   310    	LD	BC,0
040133 C5                  A   311    	PUSH	BC
040134 CD 82 03 04         A   312    	CALL	_vdp_mode
040138 C1                  A   313    	POP	BC
                           A   314    ;   33					vdp_cursorDisable();
                           A   315    .LINE 33
                           A   316    
040139 CD 3F 0D 04         A   317    	CALL	_vdp_cursorDisable
                           A   318    ;   34	
                           A   319    ;   35					game_initLevel(levelnum
                           A   320    .LINE 35
                           A   321    
04013D DD4EFE              A   322    	LD	C,(IX+%FFFFFFFE)
040140 0600                A   323    	LD	B,%0
040142 C5                  A   324    	PUSH	BC
040143 CD 5D 27 04         A   325    	CALL	_game_initLevel
040147 C1                  A   326    	POP	BC
                           A   327    ;   36					game_initSprites();		
                           A   328    .LINE 36
                           A   329    
040148 CD 98 27 04         A   330    	CALL	_game_initSprites
                           A   331    ;   37					game_displayLevel();
                           A   332    .LINE 37
                           A   333    
04014C CD DD 22 04         A   334    	CALL	_game_displayLevel
                           A   335    ;   38					while(ingame)
                           A   336    .LINE 38
                           A   337    
040150 C3 5D 02 04         A   338    	JR	L_17
040154                     A   339    L_18:
                           A   340    ;   39					{
                           A   341    ;   40						key = getch();
                           A   342    .LINE 40
                           A   343    
040154 CD DA 28 04         A   344    	CALL	_getch
040158 DD77FB              A   345    	LD	(IX+%FFFFFFFB),A
                           A   346    ;   41						switch(key)
                           A   347    .LINE 41
                           A   348    
04015B 17ED62              A   349    	SEXT	HL
04015E DD6EFB              A   350    	LD	L,(IX+%FFFFFFFB)
040161 CD 4F 32 04         A   351    	CALL	__case8D
040165 E9                  A   352    	JP	(HL)
040166                     A   353    L__3:
040166 0500                A   354    	DW	5
040168 1B                  A   355    	DB	27
040169 7F0104              A   356    	DW24	L_2	
                           A   357    
04016C 51                  A   358    	DB	81
04016D 7F0104              A   359    	DW24	L_1	
                           A   360    
040170 68                  A   361    	DB	104
040171 C10104              A   362    	DW24	L_5	
                           A   363    
040174 71                  A   364    	DB	113
040175 7F0104              A   365    	DW24	L_0	
                           A   366    
040178 75                  A   367    	DB	117
040179 EB0104              A   368    	DW24	L_6	
                           A   369    
04017C F10104              A   370    	DW24	L_7	
                           A   371    
                           A   372    ;   42						{
                           A   373    ;   43							case 'q':
04017F                     A   374    L_0:
                           A   375    .LINE 43
                           A   376    
                           A   377    ;   44							case 'Q':
04017F                     A   378    L_1:
                           A   379    .LINE 44
                           A   380    
                           A   381    ;   45							case 27:
04017F                     A   382    L_2:
                           A   383    .LINE 45
                           A   384    
                           A   385    ;   46								game_resetS
                           A   386    .LINE 46
                           A   387    
04017F CD 9C 10 04         A   388    	CALL	_game_resetSprites
                           A   389    ;   47								ingame = (g
                           A   390    .LINE 47
                           A   391    
040183 016E0000            A   392    	LD	BC,110
040187 C5                  A   393    	PUSH	BC
040188 01790000            A   394    	LD	BC,121
04018C C5                  A   395    	PUSH	BC
04018D 01 4C 4C 04         A   396    	LD	BC,L__4
040191 C5                  A   397    	PUSH	BC
040192 CD 2D 1C 04         A   398    	CALL	_game_getResponse
040196 C1                  A   399    	POP	BC
040197 C1                  A   400    	POP	BC
040198 C1                  A   401    	POP	BC
040199 47                  A   402    	LD	B,A
04019A 78                  A   403    	LD	A,B
04019B 17ED62              A   404    	SEXT	HL
04019E 68                  A   405    	LD	L,B
04019F 01790000            A   406    	LD	BC,121
0401A3 B7                  A   407    	OR	A,A
0401A4 ED42                A   408    	SBC	HL,BC
0401A6 28 04               A   409    	JR	Z,L__6
0401A8 3E01                A   410    	LD	A,%1
0401AA 18 01               A   411    	JR	L__7
0401AC                     A   412    L__6:
0401AC AF                  A   413    	XOR	A,A
0401AD                     A   414    L__7:
0401AD DD77FD              A   415    	LD	(IX+%FFFFFFFD),A
                           A   416    ;   48								if(ingame)
                           A   417    .LINE 48
                           A   418    
0401B0 B7                  A   419    	OR	A,A
0401B1 CA 5D 02 04         A   420    	JR	Z,L_17
                           A   421    ;   49								{
                           A   422    ;   50									game_in
                           A   423    .LINE 50
                           A   424    
0401B5 CD 98 27 04         A   425    	CALL	_game_initSprites
                           A   426    ;   51									game_di
                           A   427    .LINE 51
                           A   428    
0401B9 CD DD 22 04         A   429    	CALL	_game_displayLevel
                           A   430    ;   52								}
                           A   431    .LINE 52
                           A   432    
                           A   433    ;   53								//game_disp
                           A   434    ;   54								break;
                           A   435    .LINE 54
                           A   436    
0401BD C3 5D 02 04         A   437    	JR	L_17
                           A   438    ;   55							case 'h':
0401C1                     A   439    L_5:
                           A   440    .LINE 55
                           A   441    
                           A   442    ;   56								game_resetS
                           A   443    .LINE 56
                           A   444    
0401C1 CD 9C 10 04         A   445    	CALL	_game_resetSprites
                           A   446    ;   57								vdp_cls();
                           A   447    .LINE 57
                           A   448    
0401C5 CD A7 03 04         A   449    	CALL	_vdp_cls
                           A   450    ;   58								game_displa
                           A   451    .LINE 58
                           A   452    
0401C9 010D0000            A   453    	LD	BC,13
0401CD C5                  A   454    	PUSH	BC
0401CE 011E0000            A   455    	LD	BC,30
0401D2 C5                  A   456    	PUSH	BC
0401D3 CD 48 1E 04         A   457    	CALL	_game_displayHelp
0401D7 C1                  A   458    	POP	BC
0401D8 C1                  A   459    	POP	BC
                           A   460    ;   59								getch();
                           A   461    .LINE 59
                           A   462    
0401D9 CD DA 28 04         A   463    	CALL	_getch
                           A   464    ;   60								vdp_cls();
                           A   465    .LINE 60
                           A   466    
0401DD CD A7 03 04         A   467    	CALL	_vdp_cls
                           A   468    ;   61								game_initSp
                           A   469    .LINE 61
                           A   470    
0401E1 CD 98 27 04         A   471    	CALL	_game_initSprites
                           A   472    ;   62								game_displa
                           A   473    .LINE 62
                           A   474    
0401E5 CD DD 22 04         A   475    	CALL	_game_displayLevel
                           A   476    ;   63								break;
                           A   477    .LINE 63
                           A   478    
0401E9 18 72               A   479    	JR	L_17
                           A   480    ;   64							case 'u':
0401EB                     A   481    L_6:
                           A   482    .LINE 64
                           A   483    
                           A   484    ;   65								game_handle
                           A   485    .LINE 65
                           A   486    
0401EB CD 91 18 04         A   487    	CALL	_game_handleUndoMove
                           A   488    ;   66								break;
                           A   489    .LINE 66
                           A   490    
0401EF 18 6C               A   491    	JR	L_17
                           A   492    ;   67							default:
0401F1                     A   493    L_7:
                           A   494    .LINE 67
                           A   495    
                           A   496    ;   68								ingame = !g
                           A   497    .LINE 68
                           A   498    
0401F1 DD4EFB              A   499    	LD	C,(IX+%FFFFFFFB)
0401F4 0600                A   500    	LD	B,%0
0401F6 C5                  A   501    	PUSH	BC
0401F7 CD E7 19 04         A   502    	CALL	_game_handleKey
0401FB C1                  A   503    	POP	BC
0401FC B7                  A   504    	OR	A,A
0401FD 20 09               A   505    	JR	NZ,L_9
0401FF 01010000            A   506    	LD	BC,1
040203 DD0FF8              A   507    	LD	(IX+%FFFFFFF8),BC
040206 18 07               A   508    	JR	L_10
040208                     A   509    L_9:
040208 01000000            A   510    	LD	BC,0
04020C DD0FF8              A   511    	LD	(IX+%FFFFFFF8),BC
04020F                     A   512    L_10:
04020F DD7EF8              A   513    	LD	A,(IX+%FFFFFFF8)
040212 DD77FD              A   514    	LD	(IX+%FFFFFFFD),A
                           A   515    ;   69								if(!ingame)
                           A   516    .LINE 69
                           A   517    
040215 B7                  A   518    	OR	A,A
040216 20 45               A   519    	JR	NZ,L_17
                           A   520    ;   70								{
                           A   521    ;   71									levelnu
                           A   522    .LINE 71
                           A   523    
040218 DD27FE              A   524    	LD	HL,(IX+%FFFFFFFE)
04021B 23                  A   525    	INC	HL
04021C DD75FE              A   526    	LD	(IX+%FFFFFFFE),L
04021F DD74FF              A   527    	LD	(IX+%FFFFFFFF),H
                           A   528    ;   72									if(leve
                           A   529    .LINE 72
                           A   530    
040222 DD07FE              A   531    	LD	BC,(IX+%FFFFFFFE)
040225 CD 06 33 04         A   532    	CALL	__stoi
040229 E5C1                A   533    	LD	BC,HL
04022B DD7EFC              A   534    	LD	A,(IX+%FFFFFFFC)
04022E B7ED62              A   535    	UEXT	HL
040231 6F                  A   536    	LD	L,A
040232 E5D1                A   537    	LD	DE,HL
040234 C5E1                A   538    	LD	HL,BC
040236 B7                  A   539    	OR	A,A
040237 ED52                A   540    	SBC	HL,DE
040239 20 08               A   541    	JR	NZ,L_14
04023B DD36FE00            A   542    	LD	(IX+%FFFFFFFE),%0
04023F DD36FF00            A   543    	LD	(IX+%FFFFFFFF),%0
040243                     A   544    L_14:
                           A   545    ;   73									game_re
                           A   546    .LINE 73
                           A   547    
040243 CD 9C 10 04         A   548    	CALL	_game_resetSprites
                           A   549    ;   74									game_ge
                           A   550    .LINE 74
                           A   551    
040247 011B0000            A   552    	LD	BC,27
04024B C5                  A   553    	PUSH	BC
04024C 010D0000            A   554    	LD	BC,13
040250 C5                  A   555    	PUSH	BC
040251 01 65 4C 04         A   556    	LD	BC,L__12
040255 C5                  A   557    	PUSH	BC
040256 CD 2D 1C 04         A   558    	CALL	_game_getResponse
04025A C1                  A   559    	POP	BC
04025B C1                  A   560    	POP	BC
04025C C1                  A   561    	POP	BC
                           A   562    ;   75								}
                           A   563    ;   76							break;
                           A   564    ;   77						}					
                           A   565    ;   78					}
04025D                     A   566    L_17:
                           A   567    .LINE 78
                           A   568    
04025D DD7EFD              A   569    	LD	A,(IX+%FFFFFFFD)
040260 B7                  A   570    	OR	A,A
040261 C2 54 01 04         A   571    	JR	NZ,L_18
                           A   572    ;   79				}
                           A   573    ;   80			}
040265                     A   574    L_20:
                           A   575    .LINE 80
                           A   576    
040265 DD27FE              A   577    	LD	HL,(IX+%FFFFFFFE)
040268 CD A8 32 04         A   578    	CALL	__scmpzero
04026C F2 0A 01 04         A   579    	JP	P,L_21
                           A   580    ;   81	
                           A   581    ;   82			game_resetSprites();
                           A   582    .LINE 82
                           A   583    
040270 CD 9C 10 04         A   584    	CALL	_game_resetSprites
                           A   585    ;   83			vdp_mode(1);	// 512x384 pixe
                           A   586    .LINE 83
                           A   587    
040274 01010000            A   588    	LD	BC,1
040278 C5                  A   589    	PUSH	BC
040279 CD 82 03 04         A   590    	CALL	_vdp_mode
04027D C1                  A   591    	POP	BC
                           A   592    ;   84		}
                           A   593    ;   85		else
                           A   594    .LINE 85
                           A   595    
04027E 18 42               A   596    	JR	L_25
040280                     A   597    L_24:
                           A   598    ;   86		{
                           A   599    ;   87			vdp_cursorGoto(15,38);
                           A   600    .LINE 87
                           A   601    
040280 01260000            A   602    	LD	BC,38
040284 C5                  A   603    	PUSH	BC
040285 010F0000            A   604    	LD	BC,15
040289 C5                  A   605    	PUSH	BC
04028A CD EF 03 04         A   606    	CALL	_vdp_cursorGoto
04028E C1                  A   607    	POP	BC
04028F C1                  A   608    	POP	BC
                           A   609    ;   88			vdp_fgcolour(255,0,0);
                           A   610    .LINE 88
                           A   611    
040290 01000000            A   612    	LD	BC,0
040294 C5                  A   613    	PUSH	BC
040295 C5                  A   614    	PUSH	BC
040296 01FF0000            A   615    	LD	BC,255
04029A C5                  A   616    	PUSH	BC
04029B CD 80 04 04         A   617    	CALL	_vdp_fgcolour
04029F C1                  A   618    	POP	BC
0402A0 C1                  A   619    	POP	BC
0402A1 C1                  A   620    	POP	BC
                           A   621    ;   89			puts("No level available! - pre
                           A   622    .LINE 89
                           A   623    
0402A2 01 75 4C 04         A   624    	LD	BC,L__15
0402A6 C5                  A   625    	PUSH	BC
0402A7 CD D6 30 04         A   626    	CALL	_puts
0402AB C1                  A   627    	POP	BC
                           A   628    ;   90			getch();
                           A   629    .LINE 90
                           A   630    
0402AC CD DA 28 04         A   631    	CALL	_getch
                           A   632    ;   91			vdp_cls();
                           A   633    .LINE 91
                           A   634    
0402B0 CD A7 03 04         A   635    	CALL	_vdp_cls
                           A   636    ;   92			vdp_fgcolour(255,255,255);
                           A   637    .LINE 92
                           A   638    
0402B4 01FF0000            A   639    	LD	BC,255
0402B8 C5                  A   640    	PUSH	BC
0402B9 C5                  A   641    	PUSH	BC
0402BA C5                  A   642    	PUSH	BC
0402BB CD 80 04 04         A   643    	CALL	_vdp_fgcolour
0402BF C1                  A   644    	POP	BC
0402C0 C1                  A   645    	POP	BC
0402C1 C1                  A   646    	POP	BC
                           A   647    ;   93		}
0402C2                     A   648    L_25:
                           A   649    .LINE 93
                           A   650    
                           A   651    ;   94		puts("Thank you for playing Sokoban
                           A   652    .LINE 94
                           A   653    
0402C2 01 99 4C 04         A   654    	LD	BC,L__16
0402C6 C5                  A   655    	PUSH	BC
0402C7 CD D6 30 04         A   656    	CALL	_puts
0402CB C1                  A   657    	POP	BC
                           A   658    ;   95		return 0;
                           A   659    .LINE 95
                           A   660    
0402CC B7                  A   661    	OR	A,A
0402CD ED62                A   662    	SBC	HL,HL
                           A   663    ;   96	}
                           A   664    .LINE 96
                           A   665    
0402CF DDF9                A   666    	LD	SP,IX
0402D1 DDE1                A   667    	POP	IX
0402D3 C9                  A   668    	RET	
                           A   669    
                           A   670    
                           A   671    ;**************************** _main ***********
                           A   672    ;Name                         Addr/Register   S
                           A   673    ;_puts                               IMPORT  --
                           A   674    ;_vdp_fgcolour                       IMPORT  --
                           A   675    ;_vdp_cursorGoto                     IMPORT  --
                           A   676    ;_game_handleKey                     IMPORT  --
                           A   677    ;_game_handleUndoMove                IMPORT  --
                           A   678    ;_game_displayHelp                   IMPORT  --
                           A   679    ;_vdp_cls                            IMPORT  --
                           A   680    ;_game_getResponse                   IMPORT  --
                           A   681    ;_game_resetSprites                  IMPORT  --
                           A   682    ;_getch                              IMPORT  --
                           A   683    ;_game_displayLevel                  IMPORT  --
                           A   684    ;_game_initSprites                   IMPORT  --
                           A   685    ;_game_initLevel                     IMPORT  --
                           A   686    ;_vdp_cursorDisable                  IMPORT  --
                           A   687    ;_vdp_mode                           IMPORT  --
                           A   688    ;_game_selectLevel                   IMPORT  --
                           A   689    ;_game_sendSpriteData                IMPORT  --
                           A   690    ;_game_readLevels                    IMPORT  --
                           A   691    ;_game_splash_screen                 IMPORT  --
                           A   692    ;temp11                                IX-8    
                           A   693    ;key                                   IX-5    
                           A   694    ;levels                                IX-4    
                           A   695    ;ingame                                IX-3    
                           A   696    ;levelnumber                           IX-2    
                           A   697    ;argv                                  IX+9    
                           A   698    ;argc                                  IX+6    
                           A   699    
                           A   700    
                           A   701    ; Stack Frame Size: 20 (bytes)
                           A   702    ;       Spill Code: 0 (instruction)
                           A   703    
                           A   704    
                           A   705    .ENDFUNC "main",96,"_main"
                           A   706    	SEGMENT STRSECT
044C41                     A   707    L__0:
044C41 6C657665 6C732E62   A   708    	DB	"levels.bin"
044C49 696E 
044C4B 00                  A   709    	DB	0
044C4C                     A   710    L__4:
044C4C 5265616C 6C792051   A   711    	DB	"Really QUIT level (y/n)?"
044C54 55495420 6C657665 
044C5C 6C202879 2F6E293F 
044C64 00                  A   712    	DB	0
044C65                     A   713    L__12:
044C65 4C657665 6C20636F   A   714    	DB	"Level complete!"
044C6D 6D706C65 746521 
044C74 00                  A   715    	DB	0
044C75                     A   716    L__15:
044C75 4E6F206C 6576656C   A   717    	DB	"No level available! - press any key"
044C7D 20617661 696C6162 
044C85 6C652120 2D207072 
044C8D 65737320 616E7920 
044C95 6B6579 
044C98 00                  A   718    	DB	0
044C99                     A   719    L__16:
044C99 5468616E 6B20796F   A   720    	DB	"Thank you for playing Sokoban"
044CA1 7520666F 7220706C 
044CA9 6179696E 6720536F 
044CB1 6B6F6261 6E 
044CB6 0D0A00              A   721    	DB	13,10,0
                           A   722    	XREF _game_splash_screen:ROM
                           A   723    	XREF _game_handleUndoMove:ROM
                           A   724    	XREF _game_displayHelp:ROM
                           A   725    	XREF _game_getResponse:ROM
                           A   726    	XREF _game_selectLevel:ROM
                           A   727    	XREF _game_handleKey:ROM
                           A   728    	XREF _game_displayLevel:ROM
                           A   729    	XREF _game_resetSprites:ROM
                           A   730    	XREF _game_initSprites:ROM
                           A   731    	XREF _game_initLevel:ROM
                           A   732    	XREF _game_sendSpriteData:ROM
                           A   733    	XREF _game_readLevels:ROM
                           A   734    	XREF _vdp_fgcolour:ROM
                           A   735    	XREF _vdp_cursorDisable:ROM
                           A   736    	XREF _vdp_cursorGoto:ROM
                           A   737    	XREF _vdp_cls:ROM
                           A   738    	XREF _vdp_mode:ROM
                           A   739    	XREF _getch:ROM
                           A   740    	XREF _puts:ROM
                           A   741    	XREF __stoi:ROM
                           A   742    	XREF __scmpzero:ROM
                           A   743    	XREF __case8D:ROM
                           A   744    	XDEF _main
                           A   745    	END


Errors: 0
Warnings: 0
Lines Assembled: 746
